---
uid: 
remarks: *content
---
## Remarks  
 IFileStagingArtifact allows an application to customize and to obtain information about the process of uploading             files to the cloud, for example as part of a task-related operation such as             [Microsoft.Azure.Batch](assetId:///N:Microsoft.Azure.Batch?qualifyHint=False&autoUpgrade=True) or [AddTaskAsync](assetId:///M:Microsoft.Azure.Batch.CloudJob.AddTaskAsync(Microsoft.Azure.Batch.CloudTask,System.Collections.Concurrent.ConcurrentDictionary{System.Type,Microsoft.Azure.Batch.IFileStagingArtifact},System.Collections.Generic.IEnumerable{Microsoft.Azure.Batch.BatchClientBehavior},System.Threading.CancellationToken)?qualifyHint=False&autoUpgrade=True).  Applications may use this             information to, for example, find out about containers that were created in Azure Storage as             part of the upload process.  
  
 When [AddTaskAsync](assetId:///M:Microsoft.Azure.Batch.JobOperations.AddTaskAsync(System.String,System.Collections.Generic.IEnumerable{Microsoft.Azure.Batch.CloudTask},Microsoft.Azure.Batch.BatchClientParallelOptions,System.Collections.Concurrent.ConcurrentBag{System.Collections.Concurrent.ConcurrentDictionary{System.Type,Microsoft.Azure.Batch.IFileStagingArtifact}},System.Nullable{System.TimeSpan},System.Collections.Generic.IEnumerable{Microsoft.Azure.Batch.BatchClientBehavior})?qualifyHint=False&autoUpgrade=True) is called, the Batch client sends the tasks to the Batch service in collections.  As each collection is             processed, the Batch client performs file staging for that collection: it examines the tasks to see if             any of them specify any [FilesToStage](assetId:///P:Microsoft.Azure.Batch.CloudTask.FilesToStage?qualifyHint=False&autoUpgrade=True), and if so creates a dictionary entry for             each type of [IFileStagingProvider](assetId:///T:Microsoft.Azure.Batch.FileStaging.IFileStagingProvider?qualifyHint=False&autoUpgrade=True) in the FilesToStage collection. The key of             the dictionary entry is the [Type](assetId:///T:System.Type?qualifyHint=False&autoUpgrade=True) of the IFileStagingProvider and the value is an instance             of the corresponding implementation of IFileStagingArtifact.  For example, if FilesToStage includes one or more             [FileToStage](assetId:///T:Microsoft.Azure.Batch.FileStaging.FileToStage?qualifyHint=False&autoUpgrade=True) objects, then the dictionary contains an entry whose key is             typeof(FileToStage) and whose value is an instance of [SequentialFileStagingArtifact](assetId:///T:Microsoft.Azure.Batch.FileStaging.SequentialFileStagingArtifact?qualifyHint=False&autoUpgrade=True).  
  
 When the Add Task operation completes, or during the Add Task operation if the application is multi-threaded,             you can examine the dictionary and convert each IFileStagingArtifact to the appropriate type to retrieve             the type-specific information.  For example, if your Add Task operation specified one or more FileToStage objects,             you can locate the dictionary entry keyed by typeof(FileToStage), cast the value to SequentialFileStagingArtifact,             and examine the [BlobContainerCreated](assetId:///P:Microsoft.Azure.Batch.FileStaging.SequentialFileStagingArtifact.BlobContainerCreated?qualifyHint=False&autoUpgrade=True) property to             determine if the upload process created a blob container in Azure Storage and if so the name of that container.             This example could be useful for cleaning up automatically created containers.  
  
 (Single-task Add Task operations work similarly, except that in a multi-task Add Task operation, there is             a dictionary for each collection of tasks, and the dictionaries are collected in a [ConcurrentBag<T\>](assetId:///T:System.Collections.Concurrent.ConcurrentBag`1?qualifyHint=False&autoUpgrade=True),             whereas in a single-task Add Task operation there is only a single dictionary.)  
  
 In a single-task Add Task operation, you can also use the dictionary to customize the file staging process, by pre-populating it with appropriate             entries.  For example, suppose you wish to control the [NamingFragment](assetId:///P:Microsoft.Azure.Batch.IFileStagingArtifact.NamingFragment?qualifyHint=False&autoUpgrade=True) for a group of FileToStage             objects.  Then you could initialize the dictionary with `{ typeof(FileToStage), new SequentialFileStagingArtifact { NamingFragment = "myname" } }` before passing it to AddTaskAsync.  The FileToStage implementation of IFileStagingProvider would then use your             SequentialFileStagingArtifact instead of creating its own.  (This feature is not available in multi-task             Add Task operations.)  
  
 You may also encounter IFileStagingArtifact if you are developing a custom [IFileStagingProvider](assetId:///T:Microsoft.Azure.Batch.FileStaging.IFileStagingProvider?qualifyHint=False&autoUpgrade=True).             In this case you will typically create a custom implementation of IFileStagingArtifact to report             implementation-specific information about your file staging process.
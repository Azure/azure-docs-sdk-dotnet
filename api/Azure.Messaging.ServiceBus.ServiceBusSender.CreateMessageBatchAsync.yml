### YamlMime:NetMember
type: method
members:
- returnsWithMoniker:
    type:
    - value: <xref href="System.Threading.Tasks.ValueTask`1?alt=System.Threading.Tasks.ValueTask&text=ValueTask" data-throw-if-not-resolved="True"/>&lt;<xref href="Azure.Messaging.ServiceBus.ServiceBusMessageBatch?alt=Azure.Messaging.ServiceBus.ServiceBusMessageBatch&text=ServiceBusMessageBatch" data-throw-if-not-resolved="True"/>&gt;
    description: An <xref data-throw-if-not-resolved="true" uid="Azure.Messaging.ServiceBus.ServiceBusMessageBatch"></xref> with the default batch options.
  parameters:
  - namesWithMoniker:
    - value: cancellationToken
    description: An optional <xref data-throw-if-not-resolved="true" uid="System.Threading.CancellationToken"></xref> instance to signal the request to cancel the operation.
    type: <xref href="System.Threading.CancellationToken?alt=System.Threading.CancellationToken&text=CancellationToken" data-throw-if-not-resolved="True"/>
  type: method
  uid: Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(System.Threading.CancellationToken)
  commentId: M:Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(System.Threading.CancellationToken)
  name: CreateMessageBatchAsync(CancellationToken)
  fullName: Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(CancellationToken)
  nameWithType: ServiceBusSender.CreateMessageBatchAsync(CancellationToken)
  syntaxWithMoniker:
  - lang: csharp
    values:
    - value: public virtual System.Threading.Tasks.ValueTask<Azure.Messaging.ServiceBus.ServiceBusMessageBatch> CreateMessageBatchAsync (System.Threading.CancellationToken cancellationToken = default);
  - lang: fsharp
    values:
    - value: >-
        abstract member CreateMessageBatchAsync : System.Threading.CancellationToken -> System.Threading.Tasks.ValueTask<Azure.Messaging.ServiceBus.ServiceBusMessageBatch>

        override this.CreateMessageBatchAsync : System.Threading.CancellationToken -> System.Threading.Tasks.ValueTask<Azure.Messaging.ServiceBus.ServiceBusMessageBatch>
  - lang: vb
    values:
    - value: Public Overridable Function CreateMessageBatchAsync (Optional cancellationToken As CancellationToken = Nothing) As ValueTask(Of ServiceBusMessageBatch)
  monikers:
  - azure-dotnet
  - azure-dotnet-preview
  seeAlso: >+
    - <xref:Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(Azure.Messaging.ServiceBus.CreateMessageBatchOptions%2cSystem.Threading.CancellationToken)>

  summary: >-
    Creates a size-constraint batch to which <xref data-throw-if-not-resolved="true" uid="Azure.Messaging.ServiceBus.ServiceBusMessage"></xref> may be added using

    a <xref data-throw-if-not-resolved="true" uid="Azure.Messaging.ServiceBus.ServiceBusMessageBatch.TryAddMessage(Azure.Messaging.ServiceBus.ServiceBusMessage)"></xref>. If a message would exceed the maximum

    allowable size of the batch, the batch will not allow adding the message and signal that

    scenario using it return value.


    Because messages that would violate the size constraint cannot be added, publishing a batch

    will not trigger an exception when attempting to send the messages to the Queue/Topic.
  metadata: {}
- returnsWithMoniker:
    type:
    - value: <xref href="System.Threading.Tasks.ValueTask`1?alt=System.Threading.Tasks.ValueTask&text=ValueTask" data-throw-if-not-resolved="True"/>&lt;<xref href="Azure.Messaging.ServiceBus.ServiceBusMessageBatch?alt=Azure.Messaging.ServiceBus.ServiceBusMessageBatch&text=ServiceBusMessageBatch" data-throw-if-not-resolved="True"/>&gt;
    description: An <xref data-throw-if-not-resolved="true" uid="Azure.Messaging.ServiceBus.ServiceBusMessageBatch"></xref> with the requested <code data-dev-comment-type="paramref">options</code>.
  parameters:
  - namesWithMoniker:
    - value: options
    description: The set of options to consider when creating this batch.
    type: <xref href="Azure.Messaging.ServiceBus.CreateMessageBatchOptions?alt=Azure.Messaging.ServiceBus.CreateMessageBatchOptions&text=CreateMessageBatchOptions" data-throw-if-not-resolved="True"/>
  - namesWithMoniker:
    - value: cancellationToken
    description: An optional <xref data-throw-if-not-resolved="true" uid="System.Threading.CancellationToken"></xref> instance to signal the request to cancel the operation.
    type: <xref href="System.Threading.CancellationToken?alt=System.Threading.CancellationToken&text=CancellationToken" data-throw-if-not-resolved="True"/>
  type: method
  uid: Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(Azure.Messaging.ServiceBus.CreateMessageBatchOptions,System.Threading.CancellationToken)
  commentId: M:Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(Azure.Messaging.ServiceBus.CreateMessageBatchOptions,System.Threading.CancellationToken)
  name: CreateMessageBatchAsync(CreateMessageBatchOptions, CancellationToken)
  fullName: Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(CreateMessageBatchOptions, CancellationToken)
  nameWithType: ServiceBusSender.CreateMessageBatchAsync(CreateMessageBatchOptions, CancellationToken)
  syntaxWithMoniker:
  - lang: csharp
    values:
    - value: public virtual System.Threading.Tasks.ValueTask<Azure.Messaging.ServiceBus.ServiceBusMessageBatch> CreateMessageBatchAsync (Azure.Messaging.ServiceBus.CreateMessageBatchOptions options, System.Threading.CancellationToken cancellationToken = default);
  - lang: fsharp
    values:
    - value: >-
        abstract member CreateMessageBatchAsync : Azure.Messaging.ServiceBus.CreateMessageBatchOptions * System.Threading.CancellationToken -> System.Threading.Tasks.ValueTask<Azure.Messaging.ServiceBus.ServiceBusMessageBatch>

        override this.CreateMessageBatchAsync : Azure.Messaging.ServiceBus.CreateMessageBatchOptions * System.Threading.CancellationToken -> System.Threading.Tasks.ValueTask<Azure.Messaging.ServiceBus.ServiceBusMessageBatch>
  - lang: vb
    values:
    - value: Public Overridable Function CreateMessageBatchAsync (options As CreateMessageBatchOptions, Optional cancellationToken As CancellationToken = Nothing) As ValueTask(Of ServiceBusMessageBatch)
  monikers:
  - azure-dotnet
  - azure-dotnet-preview
  seeAlso: >+
    - <xref:Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync(Azure.Messaging.ServiceBus.CreateMessageBatchOptions%2cSystem.Threading.CancellationToken)>

  summary: >-
    Creates a size-constraint batch to which <xref data-throw-if-not-resolved="true" uid="Azure.Messaging.ServiceBus.ServiceBusMessage"></xref> may be added using a try-based pattern.  If a message would

    exceed the maximum allowable size of the batch, the batch will not allow adding the message and signal that scenario using its

    return value.


    Because messages that would violate the size constraint cannot be added, publishing a batch will not trigger an exception when

    attempting to send the messages to the Queue/Topic.
  metadata: {}
uid: Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync*
commentId: Overload:Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync
namespace: Azure.Messaging.ServiceBus
name: CreateMessageBatchAsync
fullName: Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync
nameWithType: ServiceBusSender.CreateMessageBatchAsync
assembliesWithMoniker:
- value: Azure.Messaging.ServiceBus.dll
packagesWithMoniker:
- value: Azure.Messaging.ServiceBus v7.15.0
  monikers:
  - azure-dotnet
- value: Azure.Messaging.ServiceBus v7.11.0-beta.1
  monikers:
  - azure-dotnet-preview
devLangs:
- csharp
- vb
- fsharp
monikers:
- azure-dotnet
- azure-dotnet-preview
metadata:
  api_name:
  - Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync
  api_location:
  - Azure.Messaging.ServiceBus.dll
  topic_type:
  - apiref
  api_type:
  - Assembly
  f1_keywords:
  - Azure.Messaging.ServiceBus.ServiceBusSender.CreateMessageBatchAsync
  - Azure::Messaging::ServiceBus::ServiceBusSender::CreateMessageBatchAsync
  - CreateMessageBatchAsync
  - ServiceBusSender.CreateMessageBatchAsync
  - ServiceBusSender::CreateMessageBatchAsync
  helpviewer_keywords:
  - ServiceBusSender.CreateMessageBatchAsync method [.NET]
  - CreateMessageBatchAsync method [.NET], class ServiceBusSender
  - ServiceBusSender.CreateMessageBatchAsync(CancellationToken) method [.NET]
  - CreateMessageBatchAsync(CancellationToken) method [.NET], class ServiceBusSender
  - ServiceBusSender.CreateMessageBatchAsync(CreateMessageBatchOptions, CancellationToken) method [.NET]
  - CreateMessageBatchAsync(CreateMessageBatchOptions, CancellationToken) method [.NET], class ServiceBusSender
  monikers:
  - azure-dotnet
  - azure-dotnet-preview
